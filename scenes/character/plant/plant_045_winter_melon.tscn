[gd_scene load_steps=24 format=3 uid="uid://cj37h0ygw03e6"]

[ext_resource type="PackedScene" uid="uid://c5cke4cm02um7" path="res://scenes/character/plant/plant_000_base.tscn" id="1_w8in0"]
[ext_resource type="Texture2D" uid="uid://nj6m28m6k5p1" path="res://assets/reanim/PeaShooter_frontleaf_righttip.png" id="2_1x6ev"]
[ext_resource type="Texture2D" uid="uid://dit0i5evvco14" path="res://assets/reanim/PeaShooter_frontleaf_lefttip.png" id="3_41kgx"]
[ext_resource type="Texture2D" uid="uid://clbtu1usmi6eq" path="res://assets/reanim/WinterMelon_basket.png" id="4_4tk23"]
[ext_resource type="Texture2D" uid="uid://ver1n4vt6qk6" path="res://assets/reanim/WinterMelon_projectile.png" id="5_uc7vn"]
[ext_resource type="Texture2D" uid="uid://befie17xriefc" path="res://assets/reanim/WinterMelon_basket_overlay.png" id="6_nrqmn"]
[ext_resource type="Texture2D" uid="uid://d0euui5ylwvyt" path="res://assets/reanim/WinterMelon_stalk.png" id="7_jvi63"]
[ext_resource type="Texture2D" uid="uid://dqhqywy1kt6hq" path="res://assets/reanim/WinterMelon_melon.png" id="8_6ty4r"]
[ext_resource type="Texture2D" uid="uid://5orh8ivtbhi7" path="res://assets/reanim/WinterMelon_blink1.png" id="9_26gh6"]
[ext_resource type="Texture2D" uid="uid://cff3s0svy7rsa" path="res://assets/reanim/WinterMelon_eyebrow.png" id="10_s04lx"]
[ext_resource type="Texture2D" uid="uid://300aew7liup" path="res://assets/reanim/PeaShooter_frontleaf.png" id="11_t884t"]
[ext_resource type="Animation" uid="uid://4gch5vm7yr55" path="res://animation/character/plant/045_winter_melon/WinterMelon_idle.tres" id="12_vvf6f"]
[ext_resource type="Animation" uid="uid://cqrhbn2od5y46" path="res://animation/character/plant/045_winter_melon/WinterMelon_shooting.tres" id="13_8ufpx"]
[ext_resource type="Script" uid="uid://b5t3ejxgko6nc" path="res://scripts/character/components/attack_behavior_component/component_attack_bullet_pult_base.gd" id="14_4tk23"]
[ext_resource type="Script" uid="uid://bafp0ax1lmlge" path="res://scripts/character/components/detect_component/component_detect.gd" id="15_uc7vn"]

[sub_resource type="AnimationLibrary" id="AnimationLibrary_eil7v"]
_data = {
&"WinterMelon_idle": ExtResource("12_vvf6f"),
&"WinterMelon_shooting": ExtResource("13_8ufpx")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_nrqmn"]
animation = &"WinterMelon_shooting"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_jvi63"]
animation = &"WinterMelon_idle"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_6ty4r"]
fadein_time = 0.2
fadeout_time = 0.2

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_26gh6"]

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_s04lx"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_t884t"]
graph_offset = Vector2(-495, 27)
nodes/Animation/node = SubResource("AnimationNodeAnimation_jvi63")
nodes/Animation/position = Vector2(-320, 100)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_nrqmn")
"nodes/Animation 2/position" = Vector2(-540, 300)
nodes/OneShot/node = SubResource("AnimationNodeOneShot_6ty4r")
nodes/OneShot/position = Vector2(-60, 140)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_s04lx")
nodes/TimeScale/position = Vector2(140, 160)
"nodes/TimeScale 2/node" = SubResource("AnimationNodeTimeScale_26gh6")
"nodes/TimeScale 2/position" = Vector2(-260, 300)
node_connections = [&"output", 0, &"TimeScale", &"OneShot", 0, &"Animation", &"OneShot", 1, &"TimeScale 2", &"TimeScale", 0, &"OneShot", &"TimeScale 2", 0, &"Animation 2"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_vvf6f"]
size = Vector2(1000, 5)

[node name="Plant045WinterMelon" node_paths=PackedStringArray("node2d_detect_in_slope") instance=ExtResource("1_w8in0")]
plant_type = 45
node2d_detect_in_slope = [NodePath("HurtBoxComponent/HurtBoxDetection"), NodePath("AttackComponent/DetectComponent")]

[node name="BodyCorrect" parent="Body" index="0"]
position = Vector2(-41, -69)

[node name="Anim_blink" type="Sprite2D" parent="Body/BodyCorrect" index="0"]
visible = false
centered = false

[node name="Anim_idle" type="Sprite2D" parent="Body/BodyCorrect" index="1"]
centered = false

[node name="Anim_shooting" type="Sprite2D" parent="Body/BodyCorrect" index="2"]
visible = false
centered = false

[node name="Frontleaf_right_tip" type="Sprite2D" parent="Body/BodyCorrect" index="3"]
position = Vector2(27.495874, 59.091747)
rotation = -2.5268798
scale = Vector2(0.5729794, 0.443)
skew = 3.2093
texture = ExtResource("2_1x6ev")
centered = false

[node name="Frontleaf_tip_left" type="Sprite2D" parent="Body/BodyCorrect" index="4"]
position = Vector2(64.226814, 50.304127)
rotation = 2.5220962
scale = Vector2(0.5710206, 0.49995875)
skew = -3.1697478
texture = ExtResource("3_41kgx")
centered = false

[node name="Cabbagepult_basket" type="Sprite2D" parent="Body/BodyCorrect" index="5"]
position = Vector2(-29.98556, 19.71955)
rotation = -0.27257687
scale = Vector2(0.799, 0.799)
texture = ExtResource("4_4tk23")
centered = false

[node name="Melonpult_mellon" type="Sprite2D" parent="Body/BodyCorrect" index="6"]
position = Vector2(-42.131927, -7.50933)
rotation = -0.13426384
scale = Vector2(0.997, 0.997)
texture = ExtResource("5_uc7vn")
centered = false

[node name="Cabbagepult_basket_overlay" type="Sprite2D" parent="Body/BodyCorrect" index="7"]
position = Vector2(-27.397936, 28.723675)
rotation = -0.27257687
scale = Vector2(0.799, 0.799)
texture = ExtResource("6_nrqmn")
centered = false

[node name="Melonpult_stalk" type="Sprite2D" parent="Body/BodyCorrect" index="8"]
position = Vector2(15.406188, 22.283497)
rotation = -0.10414393
scale = Vector2(0.801, 0.79902065)
skew = 0.045162767
texture = ExtResource("7_jvi63")
centered = false

[node name="Anim_face" type="Sprite2D" parent="Body/BodyCorrect" index="9"]
position = Vector2(14.306189, 35.78556)
scale = Vector2(0.8308349, 0.7442888)
texture = ExtResource("8_6ty4r")
centered = false

[node name="Melonpult_blink" type="Sprite2D" parent="Body/BodyCorrect" index="10"]
visible = false
position = Vector2(35.3, 47.7)
scale = Vector2(0.8, 0.8)
texture = ExtResource("9_26gh6")
centered = false

[node name="Melonpult_eyebrow1" type="Sprite2D" parent="Body/BodyCorrect" index="11"]
position = Vector2(53.4, 47.389687)
scale = Vector2(0.8, 0.8)
texture = ExtResource("10_s04lx")
centered = false

[node name="Melonpult_eyebrow2" type="Sprite2D" parent="Body/BodyCorrect" index="12"]
position = Vector2(35.5, 48.59381)
scale = Vector2(0.8, 0.8)
texture = ExtResource("10_s04lx")
centered = false

[node name="Frontleaf" type="Sprite2D" parent="Body/BodyCorrect" index="13"]
position = Vector2(23.5, 55.595875)
rotation = 0.101229
scale = Vector2(0.572, 0.41712376)
skew = 0.0034908
texture = ExtResource("11_t884t")
centered = false

[node name="Frontleaf_right_tip1" type="Sprite2D" parent="Body/BodyCorrect" index="14"]
position = Vector2(56.40619, 59.79587)
rotation = -0.054950908
scale = Vector2(0.58295876, 0.43604124)
texture = ExtResource("2_1x6ev")
centered = false

[node name="Frontleaf_tip_left1" type="Sprite2D" parent="Body/BodyCorrect" index="15"]
position = Vector2(20.891748, 59.397938)
rotation = 0.22275394
scale = Vector2(0.5869175, 0.43630943)
skew = 0.026036087
texture = ExtResource("3_41kgx")
centered = false

[node name="Marker2DBullet" type="Marker2D" parent="Body/BodyCorrect" index="16"]
position = Vector2(54, -30)

[node name="AnimationPlayer" type="AnimationPlayer" parent="." index="8"]
libraries = {
&"": SubResource("AnimationLibrary_eil7v")
}

[node name="AnimationTree" type="AnimationTree" parent="." index="9"]
tree_root = SubResource("AnimationNodeBlendTree_t884t")
advance_expression_base_node = NodePath("..")
anim_player = NodePath("../AnimationPlayer")
parameters/OneShot/active = false
parameters/OneShot/internal_active = false
parameters/OneShot/request = 0
parameters/TimeScale/scale = 1.0
"parameters/TimeScale 2/scale" = 2.0

[node name="AttackComponent" type="Node2D" parent="." index="10" node_paths=PackedStringArray("markers_2d_bullet")]
script = ExtResource("14_4tk23")
can_attack_zombie_status = 5
attack_cd = 3.0
attack_bullet_type = 15
markers_2d_bullet = [NodePath("../Body/BodyCorrect/Marker2DBullet")]

[node name="BulletAttackCdTimer" type="Timer" parent="AttackComponent" index="0"]

[node name="DetectComponent" type="Node2D" parent="AttackComponent" index="1"]
script = ExtResource("15_uc7vn")

[node name="Area2D" type="Area2D" parent="AttackComponent/DetectComponent" index="0"]
position = Vector2(0, -25)
collision_layer = 0
collision_mask = 4

[node name="CollisionShape2D" type="CollisionShape2D" parent="AttackComponent/DetectComponent/Area2D" index="0"]
position = Vector2(500, 0)
shape = SubResource("RectangleShape2D_vvf6f")

[connection signal="timeout" from="AttackComponent/BulletAttackCdTimer" to="AttackComponent" method="_on_bullet_attack_cd_timer_timeout"]
